# ===========================
#  Namespace (nombre robot)
# ===========================
agl_1:
  # ===================
  #     NODOS
  # ===================
  Diagnostics:
    ros__parameters:
      # ----- ME00_diagnostics PARAMS -----
      start:
        - status
        - MergedStatus
      autorun: true
      timeout: 10    # Timeout to detect if a node is down. 

  Wheelmotor:
    ros__parameters:
      # ----- ME00_wheelmotor PARAMS -----
      # ----- Topics a publicar mediante start_launch.py -----
      start:
        - status

      # ----- ME00_wheelmotor PARAMS -----
      motor:
          usb_port: "/dev/ttyACM0"
          cmd_vel_pkg: "Control"
          max_vel: 200
          min_vel: -200

      odom:
        wheel_separation: 0.400
        wheel_radius: 0.060
        frame_id: "odom"
        child_frame_id: "base_link"
        js_topic: "joint_states"
        publish_tf: true   # False en simulacion
        publish_js: true   # False en simulacion
        publish_odom: true # False en simulacion
      
      # ----- ----- ----- ----- -----

  # Camera:
  #   # ----- ME00_camera PARAMS -----
  #   ros__parameters:
  #     start:
  #       - image_raw
  #       - camera_info
  #       - status
  #     autorun: false
  #     # 0: Simulacion, cam local
  #     # 6: Realsense color
  #     # 4: Realsense no color
  #     camera_id: 0
  #     camera_name: "usb_cam"
  #     frame_id: "base_link"
  #     width : 640
  #     height : 480
  #     framerate : 30
  #     flip_mode : 2 # 0=reverse, 2=normal
  #     camera_calibration_file: "package://me00_camera/config/usb_calibration.yaml"

  Joy:
    ros__parameters:
      autorepeat_rate: 20.0
      coalesce_interval_ms: 1
      deadzone: 0.12
      device_id: 0
      device_name: ''
      sticky_buttons: false

  Joystick:
    ros__parameters:
      # ----- AGL_joystick PARAMS -----
      start:
        - cmd_vel
        - status

      autorun: true
      
      commands:
        #ubuntu 18.04 GAMEPAD BLUETOOTH
        ##################################
        #        axes[0] = LEFT ROUND PAD (1.0) - RIGHT ROUND PAD (-1.0) 
        #        axes[1] = UP ROUND PAD (1.0) - DOWN ROUND PAD (-1.0) 
        #        axes[2] = NOT USED
        #        axes[3] = NOT USED
        #        axes[4] = R2 PRESSED (-1.0) - R2 NOT PRESSED (1.0)
        #        axes[5] = L2 PRESSED (-1.0) - L2 NOT PRESSED (1.0)
        #        axes[6] = LEFT ARROW (1.0) - RIGHT ARROW (-1.0)
        #        axes[7] = UP ARROW (1.0) - DOWN ARROW (-1.0) 
        #        buttons[0] = A (1.0)
        #        buttons[1] = B (1.0)
        #        buttons[2] = NOT USED
        #        buttons[3] = X (1.0)
        #        buttons[4] = Y (1.0)
        #        buttons[5] = NOT USED
        #        buttons[6] = L1 (1.0)
        #        buttons[7] = R1 (1.0)
        #        buttons[8] = NOT USED
        #        buttons[9] = NOT USED
        #        buttons[10] = NOT USED
        #        buttons[11] = START (1.0)
        #        buttons[12] = NOT USED
        #        buttons[13] = LEFT PAD PRESSED (1.0)
        #        buttons[14] = RIGHT PAD PRESSED (1.0)

        # This shows axes and button position
        axes_pad_left_right: 0
        axes_pad_up_down: 1
        axes_r2: 4
        axes_l2: 5
        axes_arrow_left_right: 6
        axes_arrow_up_down: 7

        button_a: 0
        button_b: 1
        button_x: 3
        button_y: 4
        button_l1: 6
        button_r1: 7
        button_select: 10
        button_start: 11
        button_pad_left: 13
        button_pad_right: 14

      speed:
        linear_gain: 10.0
        angular_gain: 5.0
        velocity: 1.0
  
  Control:
    ros__parameters:
      # ----- ME00_control PARAMS -----
      start:
        - status
        - cmd_vel
        - control
        - ADAM_Inputs
        - ADAM_Outputs
      autorun: true
      manual_pkg: "Joystick"
      autonomous_pkg: "Navigation"
      initial_mode: MANUAL  # PAUSED, MANUAL or AUTONOMOUS
      scan_front: Laser_Front/laser_scan
      scan_back: Laser_Back/laser_scan
  Lidar:
    ros__parameters:
      topic_name: 'Lidar/laser_scan'
      channel_type: 'serial'
      tcp_ip: 192.168.0.7
      tcp_port: 20108
      serial_port: '/dev/ttyUSB0' #ttyUSBx
      serial_baudrate: 256000  # A3
      frame_id: 'lidar_link'
      inverted: False
      angle_compensate: False # Esto deberia estar a true, pero a true peta
      scan_mode: 'Sensitivity'
      angle_min: 0, #Por defecto 0ยบ
      angle_max: 360 #Por defecto 360ยบ


  # Navigation:
  #   ros__parameters:
  #     start:
  #       - status
  #     autorun: true
  #     scan_topic: Laser_Merged/laser_scan
  #     odom_topic: Wheelmotor/odom
  #     scan_front: Laser_Front/laser_scan
  #     scan_back: Laser_Back/laser_scan
  #     map_topic: map
  #     map: ageve_map.yaml
  #     autorun_nav2: 'true'
  #     use_sim_time: True
  #     active_timeout: 5 # ns to detect if the service is active
  #     server_timeout: 10 # ns to wait for the response
  #     autostart_navigation: true   # to autostart the navigation when Navigation goes to RUN state
  #     autostart_localization: true # to autostart the localization when Navigation goes to RUN state      
  #     autostart_slam: false 
